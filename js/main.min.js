document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelector("body"),t=window.innerWidth-document.documentElement.offsetWidth;function s(){let s=window.innerWidth-document.documentElement.offsetWidth;e.style.paddingRight=0==s?t+"px":""}$(".popup-youtube").magnificPopup({type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!0,fixedContentPos:!0,iframe:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div>'}});const o=document.querySelector("#sendForm"),a=document.querySelector("#messageForm"),l=e=>{e.parentElement.classList.add("_error"),e.classList.add("_error")},c=e=>{e.parentElement.classList.remove("_error"),e.classList.remove("_error")},i=e=>!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value);function n(e){return/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){10,14}(\s*)?$/.test(e.value)}const d=async t=>{let o=t.target;t.preventDefault();let a=(e=>{let t=0,s=e.querySelectorAll("._req");for(let e=0;e<s.length;e++){const o=s[e];c(o),o.classList.contains("_email")?(i(o)||""===o.value)&&(l(o),t++):"tel"===o.getAttribute("type")?n(o)&&""!==o.value||(l(o),t++):""===o.value&&(l(o),t++)}return t})(o),d=new FormData(o);if(0===a){o.classList.add("_sending");let t=await fetch("sendmail.php",{method:"POST",body:d});if("sendForm"===o.id){document.querySelector(".modal__message").classList.add("active"),document.body.style.overflow="hidden",s()}if(t.ok){let e=await t.json();console.log(e.message),o.reset(),o.classList.remove("_sending")}else o.classList.remove("_sending"),console.log("Ошибка");o.closest(".modal__form")&&o.closest(".modal__form").classList.contains("active")&&(o.closest(".modal__form").classList.remove("active"),document.body.style.overflow="",e.style.paddingRight="")}else{const e="Заполнены не все обязательные поля";console.log(e)}};o.addEventListener("submit",d),a.addEventListener("submit",d);new Swiper(".swiper-container",{loop:!0,autoHeight:!0,breakpoints:{992:{autoHeight:!1}},speed:600,effect:"fade",fadeEffect:{crossFade:!0},preloadImages:!1,lazy:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});const r=document.querySelector(".modile__menu"),m=document.querySelector(".header__nav");document.addEventListener("click",t=>{const o=t.target.closest(".modile__menu");(m.classList.contains("active")&&r.classList.contains("active")&&!t.target.closest(".header__nav")&&!o||m.classList.contains("active")&&t.target.closest(".list_item"))&&(r.classList.remove("active"),m.classList.remove("active"),document.body.style.overflow="",e.style.paddingRight=""),o&&(o.classList.toggle("active"),o.classList.contains("active")?(m.classList.add("active"),document.body.style.overflow="hidden",s()):(m.classList.remove("active"),document.body.style.overflow="",e.style.paddingRight=""))});const u=document.querySelector(".modal__form");document.addEventListener("click",t=>{const o=t.target.closest(".open__modal");let a=document.querySelector(".modal__message");t.target.closest(".modal_close")&&(u.classList.remove("active"),document.body.style.overflow="",e.style.paddingRight=""),!t.target.closest(".form__wrapper")&&u.classList.contains("active")&&(u.classList.remove("active"),document.body.style.overflow="",e.style.paddingRight=""),o&&(t.preventDefault(),u.classList.add("active"),document.body.style.overflow="hidden",s()),!a.classList.contains("active")||!t.target.closest("#modal_btn_return")&&t.target.closest(".modal__mesage_content")||(a.classList.remove("active"),document.body.style.overflow="",e.style.paddingRight="")})});